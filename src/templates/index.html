{% extends "base.html" %}

{% block title %}Outi LaTeX - Viiteenhallinta{% endblock %}
{% block body_class %}index-page{% endblock %}

{% block content %}
    <h1 id="page-title">Outi LaTeX</h1>
    <p class="subtitle" id="page-subtitle">Hallitse viitteesi helposti</p>

    {% if session.get('user_id') %}
        <!-- Lomakkeet kirjautuneille -->
        <form method="POST" action="/" class="form-group" id="reference-type-form">
            <label for="form" id="form-label">Valitse viitetyyppi ja t√§yt√§ tiedot k√§sin</label>
            <select name="form" id="form">
                {% for reference_type in reference_types %}
                    <option value="{{reference_type['name']}}" id="option-{{ reference_type['name'] }}">{{reference_type['name']}}</option>
                {% endfor %}
            </select>
            <button type="submit" id="add_new-button">+ Lis√§√§ uusi viite</button>
        </form>

        <div style="display: flex; align-items: center; text-align: center; margin: 20px 0;">
            <hr style="flex-grow: 1; border: none; border-top: 1px solid #ccc; margin: 0;">
            <span style="padding: 0 10px; color: #666;">tai</span>
            <hr style="flex-grow: 1; border: none; border-top: 1px solid #ccc; margin: 0;">
        </div>

        <form method="POST" action="/get-doi" class="form-group" id="reference-type-form">
            <label for="form" id="form-label">Hae tiedot DOI:n avulla</label>
            <input id="doi-input" placeholder="10.1145/2783446.2783605" name="doi-value" type="text"/>
            <button type="submit" id="add_doi-button">+ Hae viitteen tiedot</button>
        </form>
    {% else %}
        <!-- Kirjautumiskehotus -->
        <div style="text-align: center; padding: 40px 20px; background: rgba(100, 149, 237, 0.1); border-radius: 8px; margin: 20px 0;">
            <p style="font-size: 18px; margin-bottom: 20px;">üîí Kirjaudu sis√§√§n lis√§t√§ksesi viitteit√§</p>
            <a href="/login" class="btn">Kirjaudu sis√§√§n</a>
        </div>
    {% endif %}

    <div style="display: flex; justify-content: space-between; gap: 20px; margin-top: 20px;">
        <a href="/all" class="btn" id="view-all-references-button">Tarkastele kaikkia viitteit√§</a>
        <a href="/search" class="btn" id="view-all-references-button">Hae viitteit√§</a>
    </div>
{% endblock %}
